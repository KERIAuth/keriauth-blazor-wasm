@using static Extension.Helper.CredentialHelper

@code {
    [Parameter, EditorRequired]
    public required RecursiveDictionary Credential { get; init; }

    [Parameter]
    public bool IsSelected { get; set; }

    string Title => Credential.GetValueByPath("schema.title")?.Value?.ToString() ?? "Credential";

    string Role => Credential.GetValueByPath("sad.a.officialRole")?.Value?.ToString()
                ?? Credential.GetValueByPath("sad.a.engagementContextRole")?.Value?.ToString()
                ?? string.Empty;

    string ContainerStyle => $"background-color: {GetBackgroundColor(Credential)}; border-radius: 8px;";
    string ContainerClass => IsSelected ? "credential-compact selected-credential" : "credential-compact";
}

<MudPaper Class="@ContainerClass" Style="@ContainerStyle" Elevation="1">
    <MudStack Row="true" AlignItems="AlignItems.Center" Class="pa-2" Spacing="2">
        <MudText Typo="Typo.body2"><strong>@Title</strong></MudText>
        @if (!string.IsNullOrEmpty(Role))
        {
            <MudText Typo="Typo.caption" Color="Color.Secondary">&bull; @Role</MudText>
        }
    </MudStack>
</MudPaper>
